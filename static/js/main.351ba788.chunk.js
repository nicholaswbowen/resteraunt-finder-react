(this["webpackJsonpmap-challenge"]=this["webpackJsonpmap-challenge"]||[]).push([[0],{159:function(e,t,n){e.exports=n(378)},164:function(e,t,n){},165:function(e,t,n){},170:function(e,t,n){},182:function(e,t,n){},377:function(e,t,n){},378:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(36),c=n.n(o),i=(n(164),n(63)),l=(n(165),n(14)),s=(n(170),n(29)),u=n.n(s),d=function(e){var t=e.rating,n=void 0===t?0:t;return(r.a.createElement(u.a,{rating:n,widgetRatedColors:"chocolate",widgetSpacings:"1px",widgetDimensions:"15px"},r.a.createElement(u.a.Widget,null),r.a.createElement(u.a.Widget,null),r.a.createElement(u.a.Widget,null),r.a.createElement(u.a.Widget,null),r.a.createElement(u.a.Widget,null)))};var m=function(e){var t=e.isMobile,n=e.resteraunt,r=n.name,o=n.url,c=n.rating,i=n.review_count,l=n.price,s=n.categories,u=(n.image_url,n.location.display_address.join(" "));return a.createElement("div",{className:"list-item ".concat(t?"mobile":"")},a.createElement("div",{className:"info-section"},a.createElement("a",{href:o,className:"resteraunt-title"},r),a.createElement("ul",{className:"subtitle-list"},a.createElement("li",null,a.createElement("strong",null,c)),a.createElement("li",null,a.createElement(d,{rating:c,totalReviews:i})),a.createElement("li",null,"(",i,")"),a.createElement("li",null,l),a.createElement("li",null,s[0].title)),a.createElement("div",{className:"location-line"},u)))};function p(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}function E(){var e=Object(a.useState)(p()),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){r(p())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}var g=Object(l.b)((function(e){return{resteraunts:e.resteraunts.data}}))((function(e){var t=e.resteraunts,n=void 0===t?[]:t,r=e.className,o=e.isMobile,c=E().height-110;return a.createElement("div",{className:r,style:{height:c}},n.map((function(e){return a.createElement(m,{resteraunt:e,key:e.id,isMobile:o})})))})),h=(n(175),n(64)),f=n.n(h),v=n(91),b=n.n(v),O=b()((function(e,t){var n="api.yelp.com/v3/businesses/search?location=".concat(t);y(n,e)}),600),_=b()((function(e,t){var n=t.lat,a=t.lng,r="api.yelp.com/v3/businesses/search?latitude=".concat(n,"&longitude=").concat(a);y(r,e)}),600),y=function(e,t){var n,a,r;return f.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n="https://cors-anywhere.herokuapp.com/".concat(e),"Xzn2DbrFgsSvKXaiAt1VZs8KR6VQcy9rStqZ7I537z16CG3Z32S_XDDPOtR2-jHeQDGRDnevlXsNs1ek7KrJLbR-0S-cTsCLGzz4k-hfoqt_j1Hfr3iF2TvIn3wnXnYx",o.prev=2,t({type:"GET_RESTERAUNTS_DATA_PENDING"}),o.next=6,f.a.awrap(fetch(n,{headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer ".concat("Xzn2DbrFgsSvKXaiAt1VZs8KR6VQcy9rStqZ7I537z16CG3Z32S_XDDPOtR2-jHeQDGRDnevlXsNs1ek7KrJLbR-0S-cTsCLGzz4k-hfoqt_j1Hfr3iF2TvIn3wnXnYx")}}));case 6:return a=o.sent,o.next=9,f.a.awrap(a.json());case 9:r=o.sent,t({type:"GET_RESTERAUNTS_DATA_FUFILLED",payload:r.businesses}),o.next=17;break;case 13:o.prev=13,o.t0=o.catch(2),console.error(o.t0),t({type:"GET_RESTERAUNTS_DATA_FAILED",payload:o.t0});case 17:case"end":return o.stop()}}),null,null,[[2,13]])},T=n(65),S=n.n(T);var D=Object(l.b)((function(e){var t=e.location;return{currentCoords:t.currentCoords,mapSearchRadius:t.mapSearchRadius}}),(function(e){return{onChange:function(t){O(e,t.description),Object(T.geocodeByPlaceId)(t.place_id).then((function(e){return Object(T.getLatLng)(e[0])})).then((function(t){return e({type:"SET_MAP_COORDS",payload:t})}))}}}))((function(e){var t=e.onChange,n=e.currentCoords,r=e.mapSearchRadius;return a.createElement(S.a,{onSelect:t,placeholder:"Address, location, landmark, etc",autocompletionRequest:{location:n,radius:r}})}));n(182);var C=Object(l.b)(null,(function(e){return{onClick:function(){return function(e){e({type:"GET_LOCATION_PENDING"}),navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,a={lat:n.latitude,lng:n.longitude};e({type:"GET_LOCATION_FUFILLED",payload:a}),_(e,a)}),(function(){return e({type:"GET_LOCATION_FAILED"})}))}(e)}}}))((function(e){var t=e.onClick;return r.a.createElement("button",{className:"location-toggle",onClick:t},"Use my Location")})),A=n(92),N=n(43);var j=Object(A.a)(N.withScriptjs,N.withGoogleMap,Object(l.b)((function(e){var t=e.location;return{currentCoords:t.currentCoords,mapZoom:t.mapZoom,resteraunts:e.resteraunts.data}})),Object(A.b)((function(e){var t=e.dispatch,n={map:void 0};return{onMapMounted:function(){return function(e){n.map=e}},onZoomChanged:function(){return function(){return t({type:"SET_MAP_ZOOM",payload:n.map.getZoom()})}},onDragEnd:function(){return function(){var e=n.map.getCenter(),a={lat:e.lat(),lng:e.lng()};t({type:"SET_MAP_COORDS",payload:a}),_(t,a)}}}})))((function(e){var t=e.currentCoords,n=e.mapZoom,r=e.onMapMounted,o=e.onZoomChanged,c=e.onDragEnd,i=e.resteraunts,l=void 0===i?[]:i;return a.createElement(N.GoogleMap,{defaultZoom:n,center:t,ref:r,onZoomChanged:o,mapZoom:n,onDragEnd:c},l.map((function(e){var t=e.id,n=e.name,r=e.url,o=e.coordinates,c=o.latitude,i=o.longitude;return a.createElement(N.Marker,{key:t,position:{lat:c,lng:i},title:n,onClick:function(){return window.open(r,"_blank")}})})))})),R=(n(377),n(153)),w=n(154),L=n.n(w),I=n(155),G=n.n(I),k=function(e){var t=e.enabled,n=e.onClick,a=e.text;return r.a.createElement("span",{className:"toggle-switch"},r.a.createElement(R.Icon,{icon:t?L.a:G.a,height:50,onClick:n}),r.a.createElement("span",{className:"icon-title"},a))};var M=Object(l.b)((function(e){return{coords:e.location.currentCoords}}))((function(e){var t=e.coords,n=e.dispatch,o=E(),c=o.height-110,l=o.width<=640,s=l?"mobile":"desktop",u=Object(a.useState)(!1),d=Object(i.a)(u,2),m=d[0],p=d[1];return Object(a.useEffect)((function(){_(n,t)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"top-nav"},r.a.createElement("div",{className:"top-section"},r.a.createElement(C,null),l?r.a.createElement(k,{onClick:function(){return p(!m)},enabled:m,text:"Show on Map"}):null),r.a.createElement(D,null)),r.a.createElement("div",{className:"main-container ".concat(s)},m?null:r.a.createElement(g,{className:"list-container ".concat(s),isMobile:l}),r.a.createElement(j,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDtDfUicswx55w6oJ8GuW3lqa3I-YBJXVU&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:c,visibility:"".concat(m||!l?"visible":"hidden")},className:"map-container ".concat(s)}),mapElement:r.a.createElement("div",{style:{height:"100%"}})})))})),Z=n(25),F=n(156),U=n(157),x=n(19),X={20:1128.49722,19:2256.99444,18:4513.98888,17:9027.977761,16:18055.95552,15:36111.91104,14:5e4},z=function(e){return X[e]?X[e]:e>20?1128.49722:e<14?5e4:void 0},P={hasLocationEnabled:!1,currentCoords:{lat:39.758949,lng:-84.191605},pending:!1,error:!1,mapZoom:16,mapSearchRadius:z(16)},W={data:[],pending:!1},q=Object(Z.combineReducers)({location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MAP_ZOOM":var n=t.payload<=20?t.payload:20;return Object(x.a)({},e,{mapZoom:n,mapSearchRadius:z(n)});case"SET_MAP_COORDS":return Object(x.a)({},e,{currentCoords:{lat:t.payload.lat,lng:t.payload.lng}});case"GET_LOCATION_PENDING":return Object(x.a)({},e,{pending:!0});case"GET_LOCATION_FUFILLED":return Object(x.a)({},e,{hasLocationEnabled:!0,pending:!1,currentCoords:{lat:t.payload.lat,lng:t.payload.lng}});case"GET_LOCATION_REJECTED":return Object(x.a)({},e,{hasLocationEnabled:!1,pending:!1,error:!0});default:return e}},resteraunts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RESTERAUNTS_DATA_PENDING":return Object(x.a)({},e,{pending:!0});case"GET_RESTERAUNTS_DATA_FUFILLED":return Object(x.a)({},e,{pending:!1,data:t.payload});case"GET_RESTERAUNTS_DATA_FAILED":return Object(x.a)({},e,{pending:!1});default:return e}}}),J=Object(Z.createStore)(q,{},Object(U.composeWithDevTools)(Object(Z.applyMiddleware)(F.a))),H=n(158),K=n.n(H);c.a.render(r.a.createElement(l.a,{store:J},r.a.createElement(K.a,{src:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDtDfUicswx55w6oJ8GuW3lqa3I-YBJXVU&libraries=places"}),r.a.createElement(M,null)),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.351ba788.chunk.js.map